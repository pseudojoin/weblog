<h1>ElasticSearch for Articles</h1>

<%= form_for :search_articles, url: search_articles_path, id: "article_search_form", method: :get do |form| %>
  <%= form.text_field :query, value: params[:search_articles].presence && params[:search_articles][:query] %>
  <%= form.submit 'Search by Elastico' %>
<% end %>
<p>
  <% unless @articles.nil? %>
    <% if @articles.empty? %>
      <h2>No articles found matching your query.</h2>
    <% else %>

      <table style="width: 100%;" id="articles_list">
        <tr>
          <th>Id</th>
          <th>Title</th>
          <th>Text</th>
          <th colspan="3">Actions</th>
        </tr>

        <% @articles.each do |article| %>
            <tr>
              <td><%= article.id %></td>
              <td><%= article.title %></td>
              <td><%= article.text %></td>
              <td><%= link_to 'Show', article_path(article.id) %></td>
              <td><%= link_to 'Edit', edit_article_path(article.id) %></td>
              <td><%= link_to 'Destroy', article_path(article.id),
                      method: :delete,
                      data: { confirm: 'Are you sure?' } %></td>
            </tr>
        <% end %>
      </table>
    <% end %>
  <% end %>
</p>
<p>
  <%= link_to 'Back', articles_path %>
</p>